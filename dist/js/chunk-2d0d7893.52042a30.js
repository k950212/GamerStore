(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0d7893"],{"76db":function(t,e,s){"use strict";s.r(e);var c=s("7a23");const a=Object(c["h"])("div",{class:"cartimg d-flex align-items-center justify-content-center p-5"},[Object(c["h"])("p",{class:"h1 fs-bold text-light"},"購物去")],-1),i={class:"container py-5",style:{"min-height":"700px"}},l={"aria-label":"breadcrumb"},o={class:"breadcrumb"},n={class:"breadcrumb-item"},d=Object(c["h"])("li",{class:"breadcrumb-item active","aria-current":"page"},"購物車",-1),r=Object(c["h"])("h3",null,"購物車",-1),h=Object(c["h"])("hr",null,null,-1),b={key:0,class:"col-md-12 bg-light p-5 d-flex justify-content-center align-items-center",style:{"min-height":"400px"}},u={class:"text-center"},p=Object(c["h"])("i",{class:"bi bi-cart display-1 fw-bold"},null,-1),j=Object(c["h"])("p",{class:"h5 fw-bold p-2"},"購物車內無商品",-1),O={key:1,class:"row mt-4"},g={class:"col-md-8"},m={class:"table align-middle"},v=Object(c["h"])("th",null,"品名",-1),x=Object(c["h"])("th",{style:{width:"110px"},class:"text-end"},"數量",-1),f=Object(c["h"])("th",{class:"text-end"},"單價",-1),y=Object(c["h"])("i",{class:"bi bi-trash-fill"},null,-1),k=[y],C={class:"d-flex align-items-center"},w={style:{width:"200px"}},L={class:"input-group input-group-sm"},$=["onUpdate:modelValue","onChange","disabled"],I={class:"input-group-text"},_={class:"text-end"},B={key:0,class:"text-success"},M=["disabled","onClick"],P=Object(c["h"])("i",{class:"bi bi-x"},null,-1),U=[P],q=Object(c["h"])("tfoot",null,null,-1),S={class:"col-md-4"},V={class:"border border-primary",style:{padding:"20px"}},N={class:"d-flex justify-content-between"},z=Object(c["h"])("p",null,"總計:",-1),T={class:"input-group mb-3 input-group-sm"},G=["disabled"],J={class:"input-group-append"},A={key:0},D=Object(c["h"])("p",{class:"text-end text-success"},"已套用優惠券",-1),E=[D],F={key:1,class:"d-flex justify-content-between"},H=Object(c["h"])("p",{colspan:"3",class:"text-end text-success"},"折扣價",-1),K={class:"text-end text-success"},Q={class:"row mt-4"},R={class:"pb-5"},W={class:"container"},X=Object(c["h"])("div",{class:"d-flex justify-content-between"},[Object(c["h"])("h4",null,"猜你可能會喜歡"),Object(c["h"])("a",{href:"#/user/userproducts",class:"text-decoration-none fs-5 fw-bold"},"更多商品")],-1),Y={class:"row col-lg-12"},Z={class:"card flex h-100 w-100 productcard"},tt=["src"],et={class:"card-body"},st=["onClick"],ct={class:"d-flex justify-content-between"},at={class:"card-title",style:{"max-height":"35px"}},it=Object(c["h"])("hr",null,null,-1),lt={class:"text-end"},ot={class:"text-danger"},nt={class:"text-success h3"},dt={class:"text-end"},rt=["onClick","disabled"],ht={key:0,class:"spinner-border spinner-border-sm text-danger",role:"status"},bt=Object(c["h"])("span",{class:"visually-hidden"},"Loading...",-1),ut=[bt],pt=Object(c["h"])("i",{class:"bi bi-cart"},null,-1),jt=Object(c["h"])("div",{class:"info d-flex justify-content-center align-items-center"},[Object(c["h"])("p",{class:"text-white fw-bold h4"},"詳細內容")],-1);function Ot(t,e,s,y,P,D){const bt=Object(c["I"])("Loading"),Ot=Object(c["I"])("router-link");return Object(c["B"])(),Object(c["g"])(c["a"],null,[Object(c["k"])(bt,{active:P.isLoading},null,8,["active"]),a,Object(c["h"])("div",i,[Object(c["h"])("nav",l,[Object(c["h"])("ol",o,[Object(c["h"])("li",n,[Object(c["k"])(Ot,{to:"/",class:"text-danger fw-bold",style:{"text-decoration":"none"}},{default:Object(c["U"])(()=>[Object(c["j"])("首頁")]),_:1})]),d])]),r,h,0==this.cart.total?(Object(c["B"])(),Object(c["g"])("div",b,[Object(c["h"])("div",u,[p,j,Object(c["h"])("button",{class:"btn p-2 btn-outline-danger",onClick:e[0]||(e[0]=(...t)=>D.gotoproducts&&D.gotoproducts(...t)),style:{"font-size":"15px"}}," 繼續選購 ")])])):(Object(c["B"])(),Object(c["g"])("div",O,[Object(c["h"])("div",g,[Object(c["h"])("table",m,[Object(c["h"])("thead",null,[Object(c["h"])("tr",null,[v,x,f,Object(c["h"])("th",null,[Object(c["h"])("button",{type:"button",class:"btn btn-outline-secondary btn-sm",onClick:e[1]||(e[1]=(...t)=>D.removeCarts&&D.removeCarts(...t))},k)])])]),Object(c["h"])("tbody",null,[P.cart.carts?(Object(c["B"])(!0),Object(c["g"])(c["a"],{key:0},Object(c["G"])(P.cart.carts,e=>(Object(c["B"])(),Object(c["g"])("tr",{key:e.id,class:"align-items-center"},[Object(c["h"])("td",null,[Object(c["h"])("div",C,[Object(c["h"])("div",w,[Object(c["h"])("div",{style:Object(c["t"])([{height:"150px","background-size":"cover","background-position":"center"},{backgroundImage:`url(${e.product.imageUrl})`}])},null,4)]),Object(c["h"])("div",null,[Object(c["h"])("p",null,Object(c["L"])(e.product.title),1)])])]),Object(c["h"])("td",null,[Object(c["h"])("div",L,[Object(c["V"])(Object(c["h"])("input",{type:"number",class:"form-control","onUpdate:modelValue":t=>e.qty=t,min:"1",onChange:t=>D.updateCart(e),disabled:e.id===P.status.loadingItem},null,40,$),[[c["P"],e.qty,void 0,{number:!0}]]),Object(c["h"])("div",I," / "+Object(c["L"])(e.product.unit),1)])]),Object(c["h"])("td",_,[P.cart.final_total!==P.cart.total?(Object(c["B"])(),Object(c["g"])("small",B,"折扣價：")):Object(c["f"])("",!0),Object(c["j"])(" "+Object(c["L"])(t.$filters.currency(e.final_total)),1)]),Object(c["h"])("td",null,[Object(c["h"])("button",{type:"button",class:"btn btn-outline-danger btn-sm",disabled:P.status.loadingItem===e.id,onClick:t=>D.removeCartItem(e.id)},U,8,M)])]))),128)):Object(c["f"])("",!0)]),q])]),Object(c["h"])("div",S,[Object(c["h"])("div",V,[Object(c["h"])("div",N,[z,Object(c["h"])("p",null,Object(c["L"])(t.$filters.currency(P.cart.total)),1)]),Object(c["h"])("div",T,[Object(c["V"])(Object(c["h"])("input",{type:"text",class:"form-control","onUpdate:modelValue":e[2]||(e[2]=t=>P.coupon_code=t),placeholder:"請輸入優惠碼",disabled:P.cart.final_total!==P.cart.total},null,8,G),[[c["P"],P.coupon_code]]),Object(c["h"])("div",J,[Object(c["h"])("button",{class:"btn btn-outline-secondary",type:"button",onClick:e[3]||(e[3]=(...t)=>D.addCouponCode&&D.addCouponCode(...t))}," 套用 ")])]),P.cart.final_total!==P.cart.total?(Object(c["B"])(),Object(c["g"])("div",A,E)):Object(c["f"])("",!0),P.cart.final_total!==P.cart.total?(Object(c["B"])(),Object(c["g"])("div",F,[H,Object(c["h"])("p",K,Object(c["L"])(t.$filters.currency(P.cart.final_total)),1)])):Object(c["f"])("",!0),Object(c["h"])("button",{type:"button",class:"btn btn-danger w-100",onClick:e[4]||(e[4]=(...t)=>D.gotoBill&&D.gotoBill(...t))}," 去結帳 ")])])])),Object(c["h"])("div",Q,[Object(c["h"])("section",R,[Object(c["h"])("div",W,[X,Object(c["h"])("div",Y,[(Object(c["B"])(!0),Object(c["g"])(c["a"],null,Object(c["G"])(P.products.slice(P.number,P.number+4),t=>(Object(c["B"])(),Object(c["g"])("div",{class:"col-md-6 col-lg-4 col-xl-3",style:{height:"430px"},key:t.id},[Object(c["h"])("div",Z,[Object(c["h"])("img",{src:t.imageUrl,class:"card-img-top img-fluid",alt:"#",style:{"min-height":"200px","background-color":"black",display:"block",width:"100%","object-fit":"cover"}},null,8,tt),Object(c["h"])("div",et,[Object(c["h"])("a",{class:"btn stretched-link",onClick:e=>D.getProduct(t.id)},null,8,st),Object(c["h"])("div",ct,[Object(c["h"])("h5",at,Object(c["L"])(t.title),1)]),it,Object(c["h"])("div",lt,[Object(c["h"])("del",ot,"NT:"+Object(c["L"])(t.origin_price),1),Object(c["h"])("p",nt,"NT:"+Object(c["L"])(t.price),1)]),Object(c["h"])("div",dt,[Object(c["h"])("button",{type:"button",class:"btn btn-outline-danger",onClick:e=>D.addCart(t.id),disabled:this.status.loadingItem===t.id,style:{"z-index":"2",position:"relative"}},[this.status.loadingItem===t.id?(Object(c["B"])(),Object(c["g"])("div",ht,ut)):Object(c["f"])("",!0),pt],8,rt)])]),jt])]))),128))])])])])])],64)}s("14d9");var gt={data(){return{products:[],product:{},status:{loadingItem:""},cart:{},coupon_code:"",isLoading:!1,form:{user:{name:"",email:"",tel:"",address:""},message:""},number:""}},methods:{getrandomN(){const t=Math.floor(25*Math.random());this.number=t},getProducts(){const t="https://vue3-course-api.hexschool.io/api/k950212-api/products/all";this.isLoading=!0,this.$http.get(t).then(t=>{this.products=t.data.products,this.isLoading=!1})},getProduct(t){this.$router.push("/user/product/"+t)},addCart(t){const e="https://vue3-course-api.hexschool.io/api/k950212-api/cart";this.isLoading=!0,this.status.loadingItem=t;const s={product_id:t,qty:1};this.$http.post(e,{data:s}).then(t=>{this.$httpMessageState(t,"新增至購物車"),this.status.loadingItem="",this.getCart(),this.isLoading=!1})},getCart(){const t="https://vue3-course-api.hexschool.io/api/k950212-api/cart";this.$http.get(t).then(t=>{console.log(t),this.cart=t.data.data})},updateCart(t){const e="https://vue3-course-api.hexschool.io/api/k950212-api/cart/"+t.id;this.isLoading=!0,this.status.loadingItem=t.id;const s={product_id:t.product_id,qty:t.qty};this.$http.put(e,{data:s}).then(t=>{console.log(t),this.status.loadingItem="",this.getCart(),this.isLoading=!1})},removeCartItem(t){const e="https://vue3-course-api.hexschool.io/api/k950212-api/cart/"+t;this.isLoading=!0,this.$http.delete(e).then(t=>{this.$httpMessageState(t,"從購物車刪除"),console.log(t),this.getCart(),this.isLoading=!1})},removeCarts(){const t="https://vue3-course-api.hexschool.io/api/k950212-api/carts";this.isLoading=!0,this.$http.delete(t).then(t=>{this.$httpMessageState(t,"購物車清空"),console.log(t),this.getCart(),this.isLoading=!1})},addCouponCode(){const t="https://vue3-course-api.hexschool.io/api/k950212-api/coupon",e={code:this.coupon_code};this.isLoading=!0,this.$http.post(t,{data:e}).then(t=>{this.$httpMessageState(t,"加入優惠券"),this.getCart(),this.isLoading=!1})},createOrder(){const t="https://vue3-course-api.hexschool.io/api/k950212-api/order";this.isLoading=!0;const e=this.form;this.$http.post(t,{data:e}).then(t=>{console.log(t),this.isLoading=!1,this.$httpMessageState(t,"建立訂單"),this.getCart(),this.$router.push("/user/checkout/"+t.data.orderId)})},gotoBill(){console.log("去結帳"),0!==this.cart.total?this.$router.push("/user/cartbill"):alert("請先將商品加入購物車")},gotoproducts(){this.$router.push("/user/userproducts")}},created(){this.getProducts(),this.getCart(),window.scrollTo(0,-1),this.getrandomN()}},mt=s("6b0d"),vt=s.n(mt);const xt=vt()(gt,[["render",Ot]]);e["default"]=xt}}]);
//# sourceMappingURL=chunk-2d0d7893.52042a30.js.map