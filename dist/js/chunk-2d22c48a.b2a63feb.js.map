{"version":3,"sources":["webpack:///./src/views/Coupons.vue","webpack:///./src/components/CouponModal.vue","webpack:///./src/components/CouponModal.vue?27a9","webpack:///./src/views/Coupons.vue?86d8"],"names":["class","_createElementVNode","_createElementBlock","_createVNode","_component_Loading","active","$data","isLoading","_hoisted_1","onClick","_cache","$event","$options","openCouponModal","_hoisted_2","_hoisted_3","_Fragment","_renderList","coupons","item","key","_toDisplayString","title","percent","_ctx","$filters","date","due_date","is_enabled","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","openDelCouponModal","_hoisted_8","_component_couponModal","coupon","tempCoupon","ref","onUpdateCoupon","updateCoupon","_component_DelModal","onDelItem","delCoupon","id","tabindex","role","aria-labelledby","aria-hidden","type","data-bs-dismiss","aria-label","for","placeholder","_hoisted_9","code","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","true-value","false-value","_hoisted_16","_hoisted_17","_hoisted_18","$emit","name","props","data","emits","watch","this","console","log","dateAndTime","Date","toISOString","split","Math","floor","mixins","modalMixin","__exports__","components","CouponModal","DelModal","config","Object","isNew","methods","getTime","$refs","couponModal","showModal","delComponent","delModal","getCoupons","url","$http","get","tempProduct","then","response","post","$httpMessageState","hideModal","put","delete","created","render"],"mappings":"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","file":"js/chunk-2d22c48a.b2a63feb.js","sourcesContent":["<template>\r\n  <div>\r\n    <Loading :active=\"isLoading\"></Loading>\r\n    <div class=\"text-end mt-4\">\r\n      <button class=\"btn btn-primary\" @click=\"openCouponModal(true)\">\r\n        建立新的優惠券\r\n      </button>\r\n    </div>\r\n    <table class=\"table mt-4\">\r\n      <thead>\r\n        <tr>\r\n          <th>名稱</th>\r\n          <th>折扣百分比</th>\r\n          <th>到期日</th>\r\n          <th>是否啟用</th>\r\n          <th>編輯</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        <tr v-for=\"(item, key) in coupons\" :key=\"key\">\r\n          <td>{{ item.title }}</td>\r\n          <td>{{ item.percent }}%</td>\r\n          <td>{{ $filters.date(item.due_date) }}</td>\r\n          <td>\r\n            <span v-if=\"item.is_enabled === 1\" class=\"text-success\">啟用</span>\r\n            <span v-else class=\"text-muted\">未起用</span>\r\n          </td>\r\n          <td>\r\n            <div class=\"btn-group\">\r\n              <button\r\n                class=\"btn btn-outline-primary btn-sm\"\r\n                @click=\"openCouponModal(false, item)\"\r\n              >\r\n                編輯\r\n              </button>\r\n              <button\r\n                class=\"btn btn-outline-danger btn-sm\"\r\n                @click=\"openDelCouponModal(item)\"\r\n              >\r\n                刪除\r\n              </button>\r\n            </div>\r\n          </td>\r\n        </tr>\r\n      </tbody>\r\n    </table>\r\n    <couponModal\r\n      :coupon=\"tempCoupon\"\r\n      ref=\"couponModal\"\r\n      @update-coupon=\"updateCoupon\"\r\n    />\r\n    <DelModal :item=\"tempCoupon\" ref=\"delModal\" @del-item=\"delCoupon\" />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport CouponModal from \"@/components/CouponModal.vue\";\r\nimport DelModal from \"@/components/DelModal.vue\";\r\nexport default {\r\n  components: { CouponModal, DelModal },\r\n  props: {\r\n    config: Object,\r\n  },\r\n  data() {\r\n    return {\r\n      coupons: {},\r\n      tempCoupon: {\r\n        title: \"\",\r\n        is_enabled: 0,\r\n        percent: 100,\r\n        code: \"\",\r\n      },\r\n      isLoading: false,\r\n      isNew: false,\r\n    };\r\n  },\r\n  methods: {\r\n    openCouponModal(isNew, item) {\r\n      this.isNew = isNew;\r\n      if (this.isNew) {\r\n        this.tempCoupon = {\r\n          due_date: new Date().getTime() / 1000,\r\n        };\r\n      } else {\r\n        this.tempCoupon = { ...item };\r\n      }\r\n      this.$refs.couponModal.showModal();\r\n    },\r\n    openDelCouponModal(item) {\r\n      this.tempCoupon = { ...item };\r\n      const delComponent = this.$refs.delModal;\r\n      delComponent.showModal();\r\n    },\r\n    getCoupons() {\r\n      this.isLoading = true;\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/coupons`;\r\n      this.$http.get(url, this.tempProduct).then((response) => {\r\n        this.coupons = response.data.coupons;\r\n        this.isLoading = false;\r\n        console.log(response);\r\n      });\r\n    },\r\n    updateCoupon(tempCoupon) {\r\n      if (this.isNew) {\r\n        const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/coupon`;\r\n        this.$http.post(url, { data: tempCoupon }).then((response) => {\r\n          console.log(response, tempCoupon);\r\n          this.$httpMessageState(response, \"新增優惠券\");\r\n          this.getCoupons();\r\n          this.$refs.couponModal.hideModal();\r\n        });\r\n      } else {\r\n        const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/coupon/${this.tempCoupon.id}`;\r\n        this.$http.put(url, { data: this.tempCoupon }).then((response) => {\r\n          console.log(response);\r\n          this.$httpMessageState(response, \"新增優惠券\");\r\n          this.getCoupons();\r\n          this.$refs.couponModal.hideModal();\r\n        });\r\n      }\r\n    },\r\n    delCoupon() {\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/coupon/${this.tempCoupon.id}`;\r\n      this.isLoading = true;\r\n      this.$http.delete(url).then((response) => {\r\n        console.log(response, this.tempCoupon);\r\n        this.$httpMessageState(response, \"刪除優惠券\");\r\n        const delComponent = this.$refs.delModal;\r\n        delComponent.hideModal();\r\n        this.getCoupons();\r\n      });\r\n    },\r\n  },\r\n  created() {\r\n    this.getCoupons();\r\n  },\r\n};\r\n</script>\r\n","<template>\r\n  <div\r\n    class=\"modal fade\"\r\n    id=\"couponModal\"\r\n    tabindex=\"-1\"\r\n    role=\"dialog\"\r\n    aria-labelledby=\"exampleModalLabel\"\r\n    aria-hidden=\"true\"\r\n    ref=\"modal\"\r\n  >\r\n    <div class=\"modal-dialog\" role=\"document\">\r\n      <div class=\"modal-content\">\r\n        <div class=\"modal-header\">\r\n          <h5 class=\"modal-title\" id=\"exampleModalLabel\">優惠券</h5>\r\n          <button\r\n            type=\"button\"\r\n            class=\"btn-close\"\r\n            data-bs-dismiss=\"modal\"\r\n            aria-label=\"Close\"\r\n          ></button>\r\n        </div>\r\n        <div class=\"modal-body\">\r\n          <div class=\"mb-3\">\r\n            <label for=\"title\">標題</label>\r\n            <input\r\n              type=\"text\"\r\n              class=\"form-control\"\r\n              id=\"title\"\r\n              v-model=\"tempCoupon.title\"\r\n              placeholder=\"請輸入標題\"\r\n            />\r\n          </div>\r\n          <div class=\"mb-3\">\r\n            <label for=\"coupon_code\">優惠碼</label>\r\n            <input\r\n              type=\"text\"\r\n              class=\"form-control\"\r\n              id=\"coupon_code\"\r\n              v-model=\"tempCoupon.code\"\r\n              placeholder=\"請輸入優惠碼\"\r\n            />\r\n          </div>\r\n          <div class=\"mb-3\">\r\n            <label for=\"due_date\">到期日</label>\r\n            <input\r\n              type=\"date\"\r\n              class=\"form-control\"\r\n              id=\"due_date\"\r\n              v-model=\"due_date\"\r\n            />\r\n          </div>\r\n          <div class=\"mb-3\">\r\n            <label for=\"price\">折扣百分比</label>\r\n            <input\r\n              type=\"number\"\r\n              class=\"form-control\"\r\n              id=\"price\"\r\n              v-model.number=\"tempCoupon.percent\"\r\n              placeholder=\"請輸入折扣百分比\"\r\n            />\r\n          </div>\r\n          <div class=\"mb-3\">\r\n            <div class=\"form-check\">\r\n              <input\r\n                class=\"form-check-input\"\r\n                type=\"checkbox\"\r\n                :true-value=\"1\"\r\n                :false-value=\"0\"\r\n                v-model=\"tempCoupon.is_enabled\"\r\n                id=\"is_enabled\"\r\n              />\r\n              <label class=\"form-check-label\" for=\"is_enabled\">\r\n                是否啟用\r\n              </label>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"modal-footer\">\r\n          <button\r\n            type=\"button\"\r\n            class=\"btn btn-secondary\"\r\n            data-bs-dismiss=\"modal\"\r\n          >\r\n            Close\r\n          </button>\r\n          <button\r\n            type=\"button\"\r\n            class=\"btn btn-primary\"\r\n            @click=\"$emit('update-coupon', tempCoupon)\"\r\n          >\r\n            更新優惠券\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport modalMixin from \"@/mixins/modalMixin\";\r\nexport default {\r\n  name: \"couponModal\",\r\n  props: {\r\n    coupon: {},\r\n  },\r\n  data() {\r\n    return {\r\n      tempCoupon: {},\r\n      due_date: \"\",\r\n    };\r\n  },\r\n  emits: [\"update-coupon\"],\r\n  watch: {\r\n    coupon() {\r\n      this.tempCoupon = this.coupon;\r\n      // 將時間格式改為 YYYY-MM-DD\r\n      console.log(this.tempCoupon.due_date);\r\n      const dateAndTime = new Date(this.tempCoupon.due_date * 1000)\r\n        .toISOString()\r\n        .split(\"T\");\r\n      [this.due_date] = dateAndTime;\r\n    },\r\n    due_date() {\r\n      this.tempCoupon.due_date = Math.floor(new Date(this.due_date) / 1000);\r\n    },\r\n  },\r\n  mixins: [modalMixin],\r\n};\r\n</script>\r\n","import { render } from \"./CouponModal.vue?vue&type=template&id=1bd680c1\"\nimport script from \"./CouponModal.vue?vue&type=script&lang=js\"\nexport * from \"./CouponModal.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\hkm\\\\Desktop\\\\Project\\\\GamerStore\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./Coupons.vue?vue&type=template&id=9d4ca470\"\nimport script from \"./Coupons.vue?vue&type=script&lang=js\"\nexport * from \"./Coupons.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\hkm\\\\Desktop\\\\Project\\\\GamerStore\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}